
<div class="flex justify-between">
    <h2 class="text-2xl font-bold mb-6 ">Football<span class="text-orange-400"> Clubs</span></h2>
    <button data-modal-target="default-modal" data-modal-toggle="default-modal" class="block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-bold rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" type="button">
Add Club      </button>
</div>
<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
   
    <div class="container mx-auto px-4 py-8">
        
        
        <!-- Search and Filter Controls (optional) -->
        <div class="flex justify-between mb-4">
          <div>
            <input type="text" placeholder="Search clubs..." class="border rounded px-3 py-2 w-64">
          </div>
        </div>
      
        <!-- Clubs Table -->
        <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
          <table class="w-full text-sm text-left rtl:text-right text-gray-500 mt-2">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50 border-black">
              <tr>
                <th scope="col" class="px-6 py-3 cursor-pointer" (click)="onSort('name')">
                  Club name
                  <span *ngIf="sortField === 'name'" class="ml-1">
                    {{sortDirection === 'asc' ? '↑' : '↓'}}
                  </span>
                </th>
                <th scope="col" class="px-6 py-3">
                  Logo
                </th>
                <th scope="col" class="px-6 py-3 cursor-pointer" (click)="onSort('league')">
                  League
                  <span *ngIf="sortField === 'league'" class="ml-1">
                    {{sortDirection === 'asc' ? '↑' : '↓'}}
                  </span>
                </th>
                <th scope="col" class="px-6 py-3 cursor-pointer" (click)="onSort('nation')">
                  Popularity Score
                  <span *ngIf="sortField === 'nation'" class="ml-1">
                    {{sortDirection === 'asc' ? '↑' : '↓'}}
                  </span>
                </th>
                <th scope="col" class="px-6 py-3">
                  <span class="sr-only">Edit</span>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let club of page?.content" 
                  class="bg-white border-b border-gray-200 hover:bg-gray-50">
                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                  {{club.name}}
                </th>
                <td class="px-6 py-4">
                  <img *ngIf="club.image" [src]="club.image" alt="{{club.name}} logo" class="h-8 w-8 object-contain">
                </td>
                <td class="px-6 py-4">
                  {{club.leagueName}}
                </td>
                <td class="px-6 py-4">
                  {{club.popularityScore}}
                </td>
                <td class="px-6 py-4 text-right">
                  <button (click)="navigate('/dashboard/club/'+club.id)"  class="font-medium text-blue-600 hover:underline">Edit</button>
                </td>
              </tr>
              
              <!-- Loading state -->
              <tr *ngIf="!page">
                <td colspan="5" class="px-6 py-4 text-center ">
                    <div id="ball-loading-wrap">
                        <div id="ball">
                          <svg viewBox="0 0 18.9 19"><path fill="#ffffff" d="M11.2 12.9H7.8L6.4 15l1.1 2.7c.6.2 1.3.2 2 .2s1.4-.1 2.1-.3l1-2.6-1.4-2.1zM13 9.3l-1 3 1.5 2.3 2.7.2c1-1.2 1.6-2.8 1.8-4.4l-2.2-1.7-2.8.6zm-5.9 3L6 9.1l-2.8-.7L1 10.1c.1 1.7.8 3.3 1.8 4.6l2.8-.2 1.5-2.2zm-.6-4.1L9 6.4V3.2L6.7 1.5c-1.8.6-3.3 1.8-4.3 3.3l1 2.6 3.1.8zM10 6.4l2.7 1.9 2.9-.7 1-2.7c-1-1.5-2.5-2.7-4.3-3.4L10 3.2v3.2z"></path><path fill="#2d2a6c" d="M17.3 4c-1-1.5-2.5-2.6-4.2-3.3C12 .3 10.8 0 9.5 0S7 .3 5.9.7c-1.6.7-3 1.8-4.1 3.2C.7 5.4 0 7.4 0 9.5c0 .5 0 .9.1 1.4.2 1.5.8 2.9 1.6 4.1 1.4 2 3.5 3.4 6 3.9.6 0 1.2.1 1.8.1s1.2-.1 1.8-.2c2.5-.5 4.6-1.9 6-4 .8-1.1 1.3-2.4 1.5-3.8.1-.5.1-1 .1-1.5.1-2-.5-3.9-1.6-5.5zM10 3.2l2.3-1.7c1.8.6 3.3 1.8 4.3 3.4l-1 2.7-2.9.7L10 6.4V3.2zM6.7 1.5L9 3.2v3.2L6.5 8.2l-3.1-.8-1-2.6c1-1.5 2.5-2.7 4.3-3.3zM2.8 14.7c-1-1.3-1.7-2.9-1.8-4.6l2.2-1.7 2.8.7 1 3.2-1.5 2.3-2.7.1zm8.8 3c-.7.2-1.4.3-2.1.3-.7 0-1.3-.1-2-.2l-1.1-2.7L7.8 13h3.4l1.4 2.2-1 2.5zm4.6-3l-2.7-.2-1.5-2.2 1-3 2.8-.7 2.2 1.7c-.2 1.7-.8 3.2-1.8 4.4z"></path></svg>
                        </div>
                      </div>
                </td>
              </tr>
              
              <!-- Empty state -->
              <tr *ngIf="page?.empty">
                <td colspan="5" class="px-6 py-4 text-center">
                  No clubs found
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      
        <!-- Pagination Controls -->
        <div class="flex items-center justify-between mt-4" *ngIf="page">
          <div>
            <span class="text-sm text-gray-700">
              Showing <span class="font-medium">{{page.number * page.size + 1}}</span> to 
              <span class="font-medium">{{page.number * page.size + page.numberOfElements}}</span> of 
              <span class="font-medium">{{page.totalElements}}</span> clubs
            </span>
          </div>
          
          <div class="flex space-x-2">
            <button (click)="onPageChange(0)" 
                    [disabled]="page.first"
                    class="px-3 py-1 border rounded disabled:opacity-50">
              First
            </button>
            <button (click)="onPageChange(page.number - 1)" 
                    [disabled]="page.first"
                    class="px-3 py-1 border rounded disabled:opacity-50">
              Previous
            </button>
            
            <div class="flex space-x-1">
              <button *ngFor="let n of getPageNumbers()" 
                      (click)="onPageChange(n)"
                      [class.bg-blue-500]="n === page.number"
                      [class.text-black]="n === page.number"
                      class="px-3 py-1 border rounded ">
                {{n + 1}}
              </button>
            </div>
            
            <button (click)="onPageChange(page.number + 1)" 
                    [disabled]="page.last"
                    class="px-3 py-1 border rounded disabled:opacity-50">
              Next
            </button>
            <button (click)="onPageChange(page.totalPages - 1)" 
                    [disabled]="page.last"
                    class="px-3 py-1 border rounded disabled:opacity-50">
              Last
            </button>
          </div>
        </div>
      </div>
</div>
<div id="default-modal" #createClubModal tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative p-4 w-full max-w-2xl max-h-full">
        <!-- Modal content -->
        <div class="relative bg-white rounded-lg shadow-sm">
            <!-- Modal header -->
            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
                <h3 class="text-xl font-semibold text-gray-900">
                    Create New Club
                </h3>
                <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center" data-modal-hide="default-modal">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                    </svg>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            
            <!-- Modal body - Form goes here -->
            <form [formGroup]="clubForm" (ngSubmit)="onSubmit()" class="p-4 md:p-5 space-y-4">
                <!-- Name Field -->
                <div class="mb-4">
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Club Name</label>
                    <input
                        id="name"
                        type="text"
                        formControlName="name"
                        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        [class.border-red-500]="clubForm.get('name')?.invalid && clubForm.get('name')?.touched"
                    >
                    <div *ngIf="clubForm.get('name')?.invalid && clubForm.get('name')?.touched" class="text-red-500 text-xs mt-1">
                        <span *ngIf="clubForm.get('name')?.errors?.['required']">Name is required</span>
                        <span *ngIf="clubForm.get('name')?.errors?.['maxlength']">Name must be less than 100 characters</span>
                    </div>
                </div>

                <!-- Date of Establishment -->
                <div class="mb-4">
                    <label for="dateOfEstablishment" class="block text-sm font-medium text-gray-700 mb-1">Date of Establishment</label>
                    <input
                        id="dateOfEstablishment"
                        type="date"
                        formControlName="dateOfEstablishment"
                        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        [class.border-red-500]="clubForm.get('dateOfEstablishment')?.invalid && clubForm.get('dateOfEstablishment')?.touched"
                        max="{{ today | date:'yyyy-MM-dd' }}"
                    >
                    <div *ngIf="clubForm.get('dateOfEstablishment')?.invalid && clubForm.get('dateOfEstablishment')?.touched" class="text-red-500 text-xs mt-1">
                        <span *ngIf="clubForm.get('dateOfEstablishment')?.errors?.['required']">Date is required</span>
                        <span *ngIf="clubForm.get('dateOfEstablishment')?.errors?.['past']">Date must be in the past or present</span>
                    </div>
                </div>

                <!-- Owner -->
                <div class="mb-4">
                    <label for="owner" class="block text-sm font-medium text-gray-700 mb-1">Owner</label>
                    <input
                        id="owner"
                        type="text"
                        formControlName="owner"
                        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        [class.border-red-500]="clubForm.get('owner')?.invalid && clubForm.get('owner')?.touched"
                    >
                    <div *ngIf="clubForm.get('owner')?.invalid && clubForm.get('owner')?.touched" class="text-red-500 text-xs mt-1">
                        <span *ngIf="clubForm.get('owner')?.errors?.['required']">Owner is required</span>
                        <span *ngIf="clubForm.get('owner')?.errors?.['maxlength']">Owner must be less than 100 characters</span>
                    </div>
                </div>

                <!-- Stadium (Dropdown) -->
                <div class="mb-6">
                    <label for="stadiumId" class="block text-sm font-medium text-gray-700 mb-1">Stadium</label>
                    <select
                        id="stadiumId"
                        formControlName="stadiumId"
                        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        [class.border-red-500]="clubForm.get('stadiumId')?.invalid && clubForm.get('stadiumId')?.touched"
                    >
                        <option value="" disabled>Select a stadium</option>
                        <option *ngFor="let stadium of stadiums" [value]="stadium.id">{{ stadium.name }}</option>
                    </select>
                    <div *ngIf="clubForm.get('stadiumId')?.invalid && clubForm.get('stadiumId')?.touched" class="text-red-500 text-xs mt-1">
                        <span *ngIf="clubForm.get('stadiumId')?.errors?.['required']">Stadium is required</span>
                    </div>
                </div>

                <div class="mb-6">
                    <label for="LeagueId" class="block text-sm font-medium text-gray-700 mb-1">Leagues</label>
                    <select
                        id="LeagueId"
                        formControlName="leagueId"
                        class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                        [class.border-red-500]="clubForm.get('leagueId')?.invalid && clubForm.get('leagueId')?.touched"
                    >
                        <option value="" disabled>Select a league</option>
                        <option *ngFor="let stadium of leagues" [value]="stadium.id">{{ stadium.name }}</option>
                    </select>
                    <div *ngIf="clubForm.get('leagueId')?.invalid && clubForm.get('leagueId')?.touched" class="text-red-500 text-xs mt-1">
                        <span *ngIf="clubForm.get('leagueId')?.errors?.['required']">League is required</span>
                    </div>
                </div>
                <div class="mb-4">
                    <label for="popularityScore" class="block text-sm font-medium text-gray-700 mb-1">
                      Popularity Score
                    </label>
                    <input
                      id="popularityScore"
                      type="number"
                      formControlName="popularityScore"
                      class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                      [class.border-red-500]="clubForm.get('popularityScore')?.invalid && (clubForm.get('popularityScore')?.touched || clubForm.get('popularityScore')?.dirty)"
                      min="60"
                      max="100"
                    >
                    <div *ngIf="clubForm.get('popularityScore')?.invalid && (clubForm.get('popularityScore')?.touched || clubForm.get('popularityScore')?.dirty)" 
                         class="text-red-500 text-xs mt-1">
                      <span *ngIf="clubForm.get('popularityScore')?.errors?.['required']">
                        Popularity score is required
                      </span>
                      <span *ngIf="clubForm.get('popularityScore')?.errors?.['min']">
                        Score must be at least 60
                      </span>
                      <span *ngIf="clubForm.get('popularityScore')?.errors?.['max']">
                        Score cannot exceed 100
                      </span>
                    </div>
                  </div>
                

                <!-- Modal footer with buttons -->
                <div class="flex items-center justify-end p-4 md:p-5 border-t border-gray-200 rounded-b">
                    <button 
                        type="button" 
                        class="py-2.5 px-5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100"
                        data-modal-hide="default-modal"
                    >
                        Cancel
                    </button>
                    <button
                        type="submit"
                        [disabled]="clubForm.invalid"
                        class="ms-3 text-white bg-green-600 hover:bg-green-700 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:bg-gray-400 disabled:cursor-not-allowed"
                    >
                        Create Club
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

